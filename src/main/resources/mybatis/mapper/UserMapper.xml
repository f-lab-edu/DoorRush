<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.flab.doorrush.domain.user.dao.UserMapper">

  <insert id="insertUser" parameterType="com.flab.doorrush.domain.user.dto.UserDto">
    INSERT INTO USER (ID,
                      PASSWORD,
                      NAME,
                      PHONE_NUMBER,
                      DEFAULT_ADDRESS,
                      EMAIL)
    values ( #{id}
           , #{password}
           , #{name}
           , #{phoneNumber}
           , #{defaultAddress}
           , #{email})
    <selectKey resultType="java.lang.String" keyColumn="ID" keyProperty="id" order="AFTER">
      SELECT ID FROM USER WHERE ID = #{id}
    </selectKey>
  </insert>

  <select id="getUserById" parameterType="String"
    resultType="com.flab.doorrush.domain.user.domain.User">
    SELECT ID,
           PASSWORD,
           NAME,
           PHONE_NUMBER,
           DEFAULT_ADDRESS,
           EMAIL
    FROM USER
    WHERE ID = #{id}
  </select>

  <select id="getCountId" parameterType="String" resultType="int">
    SELECT COUNT(*)
    FROM USER
    WHERE ID = #{id}
  </select>

</mapper>